{"ts":1372699167761,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"#!/usr/bin/env node\nvar sys = require(\"sys\"),\n\tfs = require(\"fs\"),\n\tchat = require('../lib/server'),\n\trouter = require(\"../lib/router\");\n\n// create chat server\nvar chatServer = chat.createServer();\nchatServer.listen(8001);\n\n// create a channel and log all activity to stdout\nchatServer.addChannel({\n\tbasePath: \"/chat\"\n}).addListener(\"msg\", function(msg) {\n\tsys.puts(\"<\" + msg.nick + \"> \" + msg.text);\n}).addListener(\"join\", function(msg) {\n\tsys.puts(msg.nick + \" join\");\n}).addListener(\"part\", function(msg) {\n\tsys.puts(msg.nick + \" part\");\n});\n\n// server static web files\nfunction serveFiles(localDir, webDir) {\n\tfs.readdirSync(localDir).forEach(function(file) {\n\t\tvar local = localDir + \"/\" + file,\n\t\t\tweb = webDir + \"/\" + file;\n\t\t\n\t\tif (fs.statSync(local).isDirectory()) {\n\t\t\tserveFiles(local, web);\n\t\t} else {\n\t\t\tchatServer.passThru(web, router.staticHandler(local));\n\t\t}\n\t});\n}\nserveFiles(__dirname + \"/web\", \"\");\nchatServer.passThru(\"/js/nodechat.js\", router.staticHandler(__dirname + \"/../web/nodechat.js\"));\nchatServer.passThru(\"/\", router.staticHandler(__dirname + \"/web/index.html\"));\n"]],"start1":0,"start2":0,"length1":0,"length2":1095}]],"length":1095}
{"contributors":[],"silentsave":false,"ts":1372701490401,"patch":[[{"diffs":[[0,"ten("],[-1,"8001"],[1,"process.env.PORT || 8001, process.env.IP || '127.0.0.1'"],[0,");\n\n"]],"start1":212,"start2":212,"length1":12,"length2":63}]],"length":1146,"saved":false}
